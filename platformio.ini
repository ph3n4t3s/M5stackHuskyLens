[env:m5stack-cores3]
platform = espressif32
board = m5stack-cores3
framework = arduino
monitor_speed = 115200
lib_deps = 
    Wire
    m5stack/M5CoreS3@1.0.0
    huskylens/HuskyLens@1.0.0
    moononournation/GFX Library for Arduino@1.5.0
    m5stack/M5Unified@0.2.1
    plerup/EspSoftwareSerial@6.16.1
    bblanchon/ArduinoJson@6.21.3
    https://github.com/me-no-dev/ESPAsyncWebServer.git
    https://github.com/me-no-dev/AsyncTCP.git
    arduino-libraries/NTPClient@3.2.1
    fastled/FastLED@^3.5.0

build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -DASYNCWEBSERVER_REGEX
    -DCONFIG_ASYNC_TCP_RUNNING_CORE=1
    -DCONFIG_ASYNC_TCP_USE_WDT=0
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -D_GLIBCXX_USE_C99=1
    -DUSE_USB_CDC_CONSOLE
    -std=gnu++17
    -DESP32
    -DM5STACK_CORES3
    -DUSE_TFLITE

build_unflags =
    -std=gnu++11

extra_scripts = pre:build_script.py

board_build.partitions = huge_app.csv
board_build.flash_mode = qio
board_build.f_cpu = 240000000L

upload_speed = 1500000
monitor_filters = 
    time
    esp32_exception_decoder